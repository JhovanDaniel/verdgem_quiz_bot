<!-- app/views/quiz/question.html.erb -->
<div class="container">
  <div class="row">
    <div class="col-md-8 mx-auto">
      <div class="card shadow-sm">
        <div class="card-header">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="card-title mb-0">Question <%= @question_number %> of <%= @total_questions %></h3>
            <div>
              <% if @question_number > 1 %>
                <%= link_to "Previous", quiz_previous_question_path, method: :post, class: "btn btn-outline-secondary btn-sm" %>
              <% end %>
              <span class="badge bg-<%= @question.difficulty_level == 'easy' ? 'success' : (@question.difficulty_level == 'medium' ? 'warning' : 'danger') %>">
                <%= @question.difficulty_level.humanize %>
              </span>
            </div>
          </div>
        </div>
        <div class="card-body">
          <h5 class="card-title"><%= sanitize @question.content %></h5>
          
          <%= form_with url: quiz_submit_path, method: :post, local: true do |f| %>
            <% if @question.multiple_choice? %>
              <div class="mb-3">
                <fieldset>
                  <legend class="visually-hidden">Answer Options</legend>
                  <% @question.answer_options.order(:position).each do |option| %>
                    <div class="form-check mb-2">
                      <%= f.radio_button :answer_option_id, option.id, class: "form-check-input", required: true %>
                      <%= f.label "answer_option_id_#{option.id}", sanitize(option.content), class: "form-check-label" %>
                    </div>
                  <% end %>
                </fieldset>
              </div>
            <% else %>
              <div class="mb-3">
                <%= f.label :answer, "Your Answer:", class: "form-label" %>
                <%= f.text_area :answer, class: "form-control", rows: 8, required: true, placeholder: "Type your answer here..." %>
              </div>
            <% end %>
            
            <div class="form-check mb-3">
              <%= f.check_box :question_has_problem, class: "form-check-input" %>
              <%= f.label :question_has_problem, "This question has an error or issue", class: "form-check-label" %>
            </div>
            
            <div class="mt-4 text-end">
              <%= f.submit "Submit Answer", class: "btn btn-primary" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>